(this["webpackJsonpps-flux"]=this["webpackJsonpps-flux"]||[]).push([[0],{33:function(e,t,a){e.exports=a(50)},50:function(e,t,a){"use strict";a.r(t);a(34);var n=a(0),r=a.n(n),o=a(11),c=a(3);var l=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"This is very simple Ract App with Hooks and Flux"),r.a.createElement("p",null,"React, Flux, Bootstrap, and other miracles with lots of magic. "),r.a.createElement(c.b,{to:"about",className:"btn btn-warning font-weight-bold"},"About"))},u=a(13),s=a(14),i=a(18),m=a(17),h=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"About Page"),r.a.createElement("p",null,"This app uses React!!!"))}}]),a}(r.a.Component),E=function(){var e={color:"orange",backGroundColor:"black"};return r.a.createElement("nav",{className:"\r navbar-brand \r bg-light"},r.a.createElement(c.c,{exact:!0,className:"btn btn-primary",activeStyle:e,to:"/"},"Home")," | ",r.a.createElement(c.c,{className:"btn btn-success",activeStyle:e,to:"/courses"},"Courses")," | ",r.a.createElement(c.c,{className:"btn btn-info",activeStyle:e,to:"/about"},"About"))},b=a(10),d=a(28),g=new(a(29).Dispatcher),f="CREATE_COURSE",p="UPDATE_COURSE",v="DELETE_COURSE",C="LOAD_COURSES",y=[],O=new(function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getCourses",value:function(){return y}},{key:"getCourseBySlug",value:function(e){return y.find((function(t){return t.slug===e}))}}]),a}(d.EventEmitter));g.register((function(e){switch(e.actionType){case f:y.push(e.course),O.emitChange();break;case p:O.emitChange();break;case v:y=y.filter((function(t){return t.id!==parseInt(e.id,10)})),O.emitChange();break;case C:y=e.courses,O.emitChange()}}));var j=O,S=a(9),k=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author ID"),r.a.createElement("th",null,"Category"))),r.a.createElement("tbody",null,e.courses.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){e.deleteCourse(t.id),S.b.error("Great! Course deleted.")}},"Delete")),r.a.createElement("td",null,r.a.createElement(c.b,{to:"/course/".concat(t.slug)}," ",t.title)),r.a.createElement("td",null,t.authorId),r.a.createElement("td",null,t.category))})))))},N=a(15),_=a(22),T=a.n(_),w=a(32);function I(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw a=e.sent,new Error(a);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){throw console.error("API call failed. "+e),e}var x=Object({NODE_ENV:"production",PUBLIC_URL:"/react_app_hooks_flux_router_api_from_PluralSight",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/courses/";function D(){return fetch(x).then(I).catch(P)}function L(e){return function(e){return fetch(x+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(N.a)({},e,{authorId:parseInt(e.authorId,10)}))}).then(I).catch(P)}(e).then((function(t){g.dispatch({actionType:e.id?p:f,course:t})}))}function R(){return D().then((function(e){g.dispatch({actionType:C,courses:e})}))}function F(e){return D().then((function(){g.dispatch({actionType:v,id:e})}))}var U=function(){var e=Object(n.useState)(j.getCourses()),t=Object(b.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){return j.addChangeListener(l),0===j.getCourses().length&&R(),function(){return j.removeChangeListener(l)}}),[a.length]);var l=function(){o(j.getCourses())};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Courses for super heroes!"),r.a.createElement(c.b,{className:"btn btn-primary",to:"/course"},"Add Course"),r.a.createElement(k,{courses:a,deleteCourse:F}))},B=a(8),H=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Page not found!"),r.a.createElement(c.b,{to:"/"},"Back to Home"))},G=a(16);function q(e){var t="form-group";return e.error&&e.error.length>0&&(t+="has error"),r.a.createElement("div",{className:t},r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})),e.errors&&r.a.createElement("div",{className:"alert alert-danger"},e.errors))}q.defaultProps={error:""};var z=q,J=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(z,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.course.title,errors:e.errors.title}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"author"},"Author"),r.a.createElement("div",{className:"field"},r.a.createElement("select",{onChange:e.onChange,id:"author",name:"authorId",className:"form-control",value:e.course.authorId||""},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"1"},"Misza Grishakishvili"),r.a.createElement("option",{value:"2"},"Grisza Miszakishvili"))),e.errors.authorId&&r.a.createElement("div",{className:"alert alert-danger"},e.errors.authorId)),r.a.createElement(z,{id:"category",label:"Category",name:"category",onChange:e.onChange,value:e.course.category,errors:e.errors.category}),r.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))},K=function(e){var t=Object(n.useState)({}),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(j.getCourses()),u=Object(b.a)(l,2),s=u[0],i=u[1],m=Object(n.useState)({id:null,slug:"",title:"",authorId:"",category:""}),h=Object(b.a)(m,2),E=h[0],d=h[1];Object(n.useEffect)((function(){j.addChangeListener(g);var t=e.match.params.slug;return 0===s.length?R():t&&d(j.getCourseBySlug(t)),function(){return j.removeChangeListener(g)}}),[s.length,e.match.params.slug]);var g=function(){i(j.getCourses())};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Manage Course"),r.a.createElement(J,{errors:o,course:E,onChange:function(e){var t=e.target;d(Object(N.a)({},E,Object(G.a)({},t.name,t.value)))},onSubmit:function(t){t.preventDefault(),function(){var e={};return E.title||(e.title="Title is rquired"),E.authorId||(e.authorId="Author ID is rquired"),E.category||(e.category="Category is rquired"),c(e),0===Object.keys(e).length}()&&L(E).then((function(){e.history.push("/courses"),S.b.success("Congratulations! Course saved.")}))}}))};a(49);var M=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(S.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(E,null),r.a.createElement(B.d,null,r.a.createElement(B.b,{path:"/",exact:!0,component:l}),r.a.createElement(B.b,{path:"/courses",component:U}),r.a.createElement(B.b,{path:"/about",component:h}),r.a.createElement(B.b,{path:"/course/:slug",component:K}),r.a.createElement(B.b,{path:"/course/",component:K}),r.a.createElement(B.a,{from:"/about-page",to:"about"}),r.a.createElement(B.b,{component:H})))};Object(o.render)(r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,null,r.a.createElement(M,null)),","),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.1295c920.chunk.js.map